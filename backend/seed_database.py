"""
Seed script to populate MongoDB with diagnostic criteria
Run this once before starting the application

Supports both local MongoDB and MongoDB Atlas.
Set MONGODB_URL in .env file or environment variables.
"""
import asyncio
from motor.motor_asyncio import AsyncIOMotorClient
import os
from dotenv import load_dotenv

load_dotenv()

# Supports both local MongoDB and MongoDB Atlas connection strings
# Local: mongodb://localhost:27017
# Atlas: mongodb+srv://username:password@cluster.mongodb.net/digiassistant?retryWrites=true&w=majority
MONGODB_URL = os.getenv("MONGODB_URL", "mongodb://localhost:27017")
DB_NAME = os.getenv("DB_NAME", "digiassistant")

# Diagnostic Data Structure
DIMENSIONS = [
    {"code": "STRAT", "name": "Strat√©gie", "description": "Capacit√© √† d√©finir et piloter une strat√©gie digitale align√©e avec les objectifs globaux"},
    {"code": "CULTURE", "name": "Culture & Capital Humain", "description": "Capacit√© des individus et de l'organisation √† adopter, int√©grer et faire √©voluer les usages digitaux"},
    {"code": "CLIENT", "name": "Relation Client", "description": "Capacit√© √† utiliser le digital pour am√©liorer l'exp√©rience et la relation avec les clients"},
    {"code": "PROCESS", "name": "Process", "description": "Niveau de digitalisation et d'optimisation des processus internes"},
    {"code": "TECH", "name": "Technologies", "description": "Infrastructure technique et capacit√© √† int√©grer et exploiter les outils digitaux"},
    {"code": "SECURITE", "name": "S√©curit√©", "description": "Niveau de protection des donn√©es, des syst√®mes et de conformit√© aux normes de cybers√©curit√©"}
]

PILLARS = [
    # Dimension 1 - Strat√©gie
    {"dimension_code": "STRAT", "code": "P1", "name": "Prise de conscience & Intention strat√©gique"},
    {"dimension_code": "STRAT", "code": "P2", "name": "Exp√©rimentation strat√©gique et activation"},
    {"dimension_code": "STRAT", "code": "P3", "name": "Alignement et Adaptation de la Strat√©gie digitale"},
    {"dimension_code": "STRAT", "code": "P4", "name": "Centralit√© de Strat√©gie digitale et Innovation"},
    # Dimension 2 - Culture & Capital Humain
    {"dimension_code": "CULTURE", "code": "P1", "name": "Acculturation digitale"},
    {"dimension_code": "CULTURE", "code": "P2", "name": "Apprentissage et Engagement Collectif"},
    {"dimension_code": "CULTURE", "code": "P3", "name": "Usages Num√©riques et mode de travail"},
    {"dimension_code": "CULTURE", "code": "P4", "name": "Agilit√©, collaboration et innovation"},
    # Dimension 3 - Relation Client
    {"dimension_code": "CLIENT", "code": "P1", "name": "Pr√©sence en ligne"},
    {"dimension_code": "CLIENT", "code": "P2", "name": "√âchanges num√©riques"},
    {"dimension_code": "CLIENT", "code": "P3", "name": "Structuration CRM"},
    {"dimension_code": "CLIENT", "code": "P4", "name": "Personnalisation du parcours client et automatisation"},
    # Dimension 4 - Process
    {"dimension_code": "PROCESS", "code": "P1", "name": "T√¢ches Num√©riques du flux de travail"},
    {"dimension_code": "PROCESS", "code": "P2", "name": "Digitalisation Op√©rationnelle"},
    {"dimension_code": "PROCESS", "code": "P3", "name": "Optimisation des Workflows Num√©riques"},
    {"dimension_code": "PROCESS", "code": "P4", "name": "Automatisation des workflows et excellence op√©rationnelle"},
    # Dimension 5 - Technologies
    {"dimension_code": "TECH", "code": "P1", "name": "√âquipements et outils de base"},
    {"dimension_code": "TECH", "code": "P2", "name": "Connectivit√© et Outils num√©riques de l'entreprise"},
    {"dimension_code": "TECH", "code": "P3", "name": "Infrastructure & Int√©gration continue"},
    {"dimension_code": "TECH", "code": "P4", "name": "Interop√©rabilit√© des outils et innovation technologique"},
    # Dimension 6 - S√©curit√©
    {"dimension_code": "SECURITE", "code": "P1", "name": "Sensibilit√© et pr√©cautions"},
    {"dimension_code": "SECURITE", "code": "P2", "name": "Mesures de s√©curit√©"},
    {"dimension_code": "SECURITE", "code": "P3", "name": "Pratiques cybers√©curit√©"},
    {"dimension_code": "SECURITE", "code": "P4", "name": "Conformit√© et proactivit√© cyber"},
]

# All 72 Criteria
CRITERIA = [
    # Dimension 1 - Strat√©gie (12 criteria)
    {"criterion_id": "STRAT-P1-C1", "dimension_code": "STRAT", "pillar_code": "P1", "criterion_text": "Conscience de l'importance strat√©gique du digital pour l'avenir de l'entreprise", "options": [{"score": 0, "text": "Aucun int√©r√™t ou sujet jamais √©voqu√©"}, {"score": 1, "text": "Sujet √©voqu√© ponctuellement sans action"}, {"score": 2, "text": "Sujet reconnu comme levier possible"}, {"score": 3, "text": "Sujet int√©gr√© aux pr√©occupations strat√©giques"}], "next_linear": "STRAT-P1-C2"},
    {"criterion_id": "STRAT-P1-C2", "dimension_code": "STRAT", "pillar_code": "P1", "criterion_text": "R√©flexion sur l'impact potentiel du digital sur l'activit√© ou le mod√®le de l'entreprise", "options": [{"score": 0, "text": "Aucune r√©flexion identifi√©e"}, {"score": 1, "text": "Id√©es g√©n√©rales ou informelles"}, {"score": 2, "text": "D√©but d'analyse de sc√©narios ou d'impacts"}, {"score": 3, "text": "R√©flexion structur√©e engag√©e avec premi√®res hypoth√®ses"}], "next_linear": "STRAT-P1-C3"},
    {"criterion_id": "STRAT-P1-C3", "dimension_code": "STRAT", "pillar_code": "P1", "criterion_text": "Ouverture de la direction au changement num√©rique", "options": [{"score": 0, "text": "Refus explicite ou r√©sistance visible"}, {"score": 1, "text": "Posture ouverte mais non mobilisante"}, {"score": 2, "text": "Intention affirm√©e avec quelques signaux d'implication"}, {"score": 3, "text": "Engagement visible et encourageant"}], "next_linear": "STRAT-P2-C1"},
    {"criterion_id": "STRAT-P2-C1", "dimension_code": "STRAT", "pillar_code": "P2", "criterion_text": "Identification d'un besoin m√©tier pouvant √™tre am√©lior√© gr√¢ce au digital", "options": [{"score": 0, "text": "Aucune formalisation concr√®te malgr√© la conscience des enjeux"}, {"score": 1, "text": "Besoin exprim√© sans analyse approfondie"}, {"score": 2, "text": "Besoin d√©fini avec d√©but d'exploration"}, {"score": 3, "text": "Besoin clair, prioris√© et motiv√© par la direction"}], "next_linear": "STRAT-P2-C2"},
    {"criterion_id": "STRAT-P2-C2", "dimension_code": "STRAT", "pillar_code": "P2", "criterion_text": "Exp√©rimentation concr√®te de solutions digitales", "options": [{"score": 0, "text": "Aucun test engag√© malgr√© l'intention"}, {"score": 1, "text": "Un test isol√©, sans √©valuation"}, {"score": 2, "text": "Plusieurs tests men√©s sans cadre structur√©"}, {"score": 3, "text": "Exp√©rimentations document√©es et utilis√©es pour apprendre"}], "next_linear": "STRAT-P2-C3"},
    {"criterion_id": "STRAT-P2-C3", "dimension_code": "STRAT", "pillar_code": "P2", "criterion_text": "Allocation de ressources (temps, budget, √©nergie) √† des projets digitaux", "options": [{"score": 0, "text": "Aucune ressource d√©di√©e bien que le sujet soit identifi√©"}, {"score": 1, "text": "Mobilisation ponctuelle, sans pilotage"}, {"score": 2, "text": "Affectation partielle de ressources (temps, personnes ou budget)"}, {"score": 3, "text": "Ressources formalis√©es et disponibles pour les initiatives digitales"}], "next_linear": "STRAT-P3-C1"},
    {"criterion_id": "STRAT-P3-C1", "dimension_code": "STRAT", "pillar_code": "P3", "criterion_text": "Alignement des actions digitales avec les priorit√©s strat√©giques", "options": [{"score": 0, "text": "Actions digitales encore d√©connect√©es malgr√© les exp√©rimentations"}, {"score": 1, "text": "Alignement partiel, non structur√©"}, {"score": 2, "text": "Alignement en cours sur plusieurs axes"}, {"score": 3, "text": "Alignement explicite, assum√© et pilot√©"}], "next_linear": "STRAT-P3-C2"},
    {"criterion_id": "STRAT-P3-C2", "dimension_code": "STRAT", "pillar_code": "P3", "criterion_text": "Ambition et couverture globale de la strat√©gie digitale", "options": [{"score": 0, "text": "Vision fragment√©e, actions dispers√©es"}, {"score": 1, "text": "Couverture tr√®s cibl√©e (1 ou 2 axes)"}, {"score": 2, "text": "Ambition pr√©sente sur plusieurs volets strat√©giques"}, {"score": 3, "text": "Strat√©gie digitale transversale et coh√©rente"}], "next_linear": "STRAT-P3-C3"},
    {"criterion_id": "STRAT-P3-C3", "dimension_code": "STRAT", "pillar_code": "P3", "criterion_text": "Capacit√© √† ajuster la strat√©gie digitale selon retours et √©volution", "options": [{"score": 0, "text": "R√©action tr√®s lente ou absente malgr√© l'exp√©rience"}, {"score": 1, "text": "Ajustements r√©actifs et non suivis"}, {"score": 2, "text": "R√©visions ponctuelles √† partir de retours informels"}, {"score": 3, "text": "Processus d'am√©lioration continue outill√© et suivi"}], "next_linear": "STRAT-P4-C1"},
    {"criterion_id": "STRAT-P4-C1", "dimension_code": "STRAT", "pillar_code": "P4", "criterion_text": "Int√©gration du digital au c≈ìur de la strat√©gie globale", "options": [{"score": 0, "text": "Pr√©sence marginale malgr√© un alignement partiel"}, {"score": 1, "text": "Pr√©sence symbolique mais non centrale"}, {"score": 2, "text": "Pr√©sence strat√©gique affirm√©e sur plusieurs priorit√©s"}, {"score": 3, "text": "Digital moteur de la strat√©gie globale"}], "next_linear": "STRAT-P4-C2"},
    {"criterion_id": "STRAT-P4-C2", "dimension_code": "STRAT", "pillar_code": "P4", "criterion_text": "Capacit√© √† innover ou se diff√©rencier gr√¢ce au digital", "options": [{"score": 0, "text": "Aucun levier de diff√©renciation utilis√©"}, {"score": 1, "text": "Tests ou id√©es ponctuels d'innovation"}, {"score": 2, "text": "Innovation r√©guli√®re dans certains domaines"}, {"score": 3, "text": "Innovation digitale structur√©e et align√©e √† la strat√©gie"}], "next_linear": "STRAT-P4-C3"},
    {"criterion_id": "STRAT-P4-C3", "dimension_code": "STRAT", "pillar_code": "P4", "criterion_text": "Pilotage par les donn√©es ou retours march√© sur les actions digitales", "options": [{"score": 0, "text": "Suivi limit√© aux intentions initiales, sans indicateurs"}, {"score": 1, "text": "Indicateurs suivis ponctuellement sans analyse"}, {"score": 2, "text": "KPI partiels utilis√©s pour ajustement"}, {"score": 3, "text": "Pilotage syst√©matique bas√© sur donn√©es et feedback march√©"}], "next_linear": "CULTURE-P1-C1"},
    
    # Dimension 2 - Culture & Capital Humain (12 criteria)
    {"criterion_id": "CULTURE-P1-C1", "dimension_code": "CULTURE", "pillar_code": "P1", "criterion_text": "Sensibilit√© √† l'importance du digital pour l'activit√©", "options": [{"score": 0, "text": "Aucune conscience ou d√©ni"}, {"score": 1, "text": "Int√©r√™t ponctuel ou passif"}, {"score": 2, "text": "Reconnaissance g√©n√©rale dans l'√©quipe"}, {"score": 3, "text": "Sensibilisation explicite partag√©e au sein de l'entreprise"}], "next_linear": "CULTURE-P1-C2"},
    {"criterion_id": "CULTURE-P1-C2", "dimension_code": "CULTURE", "pillar_code": "P1", "criterion_text": "Usages et √©quipements digitaux individuels (m√™me personnels)", "options": [{"score": 0, "text": "Aucun usage digital identifiable"}, {"score": 1, "text": "Usages personnels isol√©s et non li√©s au travail"}, {"score": 2, "text": "Usages num√©riques personnels utilis√©s dans l'activit√©"}, {"score": 3, "text": "Usages digitaux quotidiens (mail, WhatsApp, outils simples)"}], "next_linear": "CULTURE-P1-C3"},
    {"criterion_id": "CULTURE-P1-C3", "dimension_code": "CULTURE", "pillar_code": "P1", "criterion_text": "√âtat d'esprit collectif et ouverture √† l'apprentissage num√©rique", "options": [{"score": 0, "text": "Rejet collectif ou indiff√©rence"}, {"score": 1, "text": "Ouverture exprim√©e mais sans action"}, {"score": 2, "text": "Motivation in√©gale mais √©mergente"}, {"score": 3, "text": "Attitude curieuse et collective envers le digital"}], "next_linear": "CULTURE-P2-C1"},
    {"criterion_id": "CULTURE-P2-C1", "dimension_code": "CULTURE", "pillar_code": "P2", "criterion_text": "Identification d'usages digitaux √† tester pour l'activit√©", "options": [{"score": 0, "text": "Aucune initiative identifi√©e malgr√© l'ouverture"}, {"score": 1, "text": "Id√©es ou suggestions non concr√©tis√©es"}, {"score": 2, "text": "Tests envisag√©s ou ponctuellement r√©alis√©s"}, {"score": 3, "text": "Usages concrets test√©s en lien avec l'activit√©"}], "next_linear": "CULTURE-P2-C2"},
    {"criterion_id": "CULTURE-P2-C2", "dimension_code": "CULTURE", "pillar_code": "P2", "criterion_text": "Nouvelles m√©thodes num√©riques de travail (partage, outils simples, coordination √† distance‚Ä¶)", "options": [{"score": 0, "text": "Aucun usage collaboratif"}, {"score": 1, "text": "Initiatives individuelles"}, {"score": 2, "text": "M√©thodes partiellement partag√©es"}, {"score": 3, "text": "Adoption croissante de nouveaux modes de travail"}], "next_linear": "CULTURE-P2-C3"},
    {"criterion_id": "CULTURE-P2-C3", "dimension_code": "CULTURE", "pillar_code": "P2", "criterion_text": "Apprentissage collectif et mont√©e en comp√©tences num√©riques", "options": [{"score": 0, "text": "Aucune d√©marche d'apprentissage"}, {"score": 1, "text": "Formation isol√©e ou autodidacte"}, {"score": 2, "text": "√âchanges informels entre coll√®gues"}, {"score": 3, "text": "Apprentissage structur√© ou collectif r√©gulier"}], "next_linear": "CULTURE-P3-C1"},
    {"criterion_id": "CULTURE-P3-C1", "dimension_code": "CULTURE", "pillar_code": "P3", "criterion_text": "Usages digitaux r√©guliers et int√©gr√©s au quotidien", "options": [{"score": 0, "text": "Usages encore occasionnels ou subis"}, {"score": 1, "text": "Usages install√©s mais non syst√©matiques"}, {"score": 2, "text": "Usages fr√©quents sur des t√¢ches sp√©cifiques"}, {"score": 3, "text": "Usages num√©riques devenus r√©flexes dans le travail"}], "next_linear": "CULTURE-P3-C2"},
    {"criterion_id": "CULTURE-P3-C2", "dimension_code": "CULTURE", "pillar_code": "P3", "criterion_text": "Mode de travail collaboratif et engagement collectif", "options": [{"score": 0, "text": "Travail isol√© ou cloisonn√©"}, {"score": 1, "text": "Collaboration ponctuelle via le digital"}, {"score": 2, "text": "Coordination num√©rique entre quelques personnes"}, {"score": 3, "text": "Culture du travail collaboratif install√©e"}], "next_linear": "CULTURE-P3-C3"},
    {"criterion_id": "CULTURE-P3-C3", "dimension_code": "CULTURE", "pillar_code": "P3", "criterion_text": "D√©veloppement interne de comp√©tences num√©riques sp√©cifiques", "options": [{"score": 0, "text": "Aucune sp√©cialisation num√©rique"}, {"score": 1, "text": "Une personne ressource ou volontaire"}, {"score": 2, "text": "Plusieurs personnes ont des comp√©tences cibl√©es"}, {"score": 3, "text": "L'√©quipe d√©veloppe activement des expertises num√©riques internes"}], "next_linear": "CULTURE-P4-C1"},
    {"criterion_id": "CULTURE-P4-C1", "dimension_code": "CULTURE", "pillar_code": "P4", "criterion_text": "Digital comme moteur de progr√®s et d'innovation", "options": [{"score": 0, "text": "Le digital reste per√ßu comme un outil secondaire"}, {"score": 1, "text": "Quelques id√©es d'am√©lioration sont envisag√©es"}, {"score": 2, "text": "Le digital est utilis√© pour am√©liorer certains processus"}, {"score": 3, "text": "Le digital est int√©gr√© aux dynamiques d'innovation ou de diff√©renciation"}], "next_linear": "CULTURE-P4-C2"},
    {"criterion_id": "CULTURE-P4-C2", "dimension_code": "CULTURE", "pillar_code": "P4", "criterion_text": "Agilit√© et adaptabilit√© des pratiques face aux besoins", "options": [{"score": 0, "text": "R√©actions lentes ou fig√©es"}, {"score": 1, "text": "Adaptations improvis√©es"}, {"score": 2, "text": "Capacit√© de r√©action en √©quipe"}, {"score": 3, "text": "R√©activit√© collective face aux changements, pilot√©e par des outils"}], "next_linear": "CULTURE-P4-C3"},
    {"criterion_id": "CULTURE-P4-C3", "dimension_code": "CULTURE", "pillar_code": "P4", "criterion_text": "Culture d'auto-apprentissage et d'am√©lioration continue", "options": [{"score": 0, "text": "Aucun r√©flexe d'apprentissage ou d'am√©lioration"}, {"score": 1, "text": "Recherche personnelle d'information"}, {"score": 2, "text": "Partage d'astuces ou bonnes pratiques"}, {"score": 3, "text": "Am√©lioration continue valoris√©e et encourag√©e en √©quipe"}], "next_linear": "CLIENT-P1-C1"},
    
    # Dimension 3 - Relation Client (12 criteria)
    {"criterion_id": "CLIENT-P1-C1", "dimension_code": "CLIENT", "pillar_code": "P1", "criterion_text": "Pr√©sence de l'entreprise sur Internet ou les r√©seaux sociaux", "options": [{"score": 0, "text": "Aucune pr√©sence en ligne"}, {"score": 1, "text": "Profil cr√©√© mais non anim√©"}, {"score": 2, "text": "Pr√©sence visible avec quelques contenus"}, {"score": 3, "text": "Pr√©sence active et √† jour"}], "next_linear": "CLIENT-P1-C2"},
    {"criterion_id": "CLIENT-P1-C2", "dimension_code": "CLIENT", "pillar_code": "P1", "criterion_text": "Interactions num√©riques (m√™me simples) avec les clients (ex. : messages, appels via apps)", "options": [{"score": 0, "text": "Aucun canal num√©rique utilis√©"}, {"score": 1, "text": "Interactions tr√®s ponctuelles"}, {"score": 2, "text": "Usages num√©riques occasionnels"}, {"score": 3, "text": "Usage r√©gulier d'un canal de communication num√©rique"}], "next_linear": "CLIENT-P1-C3"},
    {"criterion_id": "CLIENT-P1-C3", "dimension_code": "CLIENT", "pillar_code": "P1", "criterion_text": "Visibilit√© et coh√©rence de l'information partag√©e en ligne (horaires, services, contacts‚Ä¶)", "options": [{"score": 0, "text": "Aucune information disponible"}, {"score": 1, "text": "Informations incompl√®tes ou non coh√©rentes"}, {"score": 2, "text": "Informations globalement claires"}, {"score": 3, "text": "Informations compl√®tes, √† jour et homog√®nes sur tous les canaux"}], "next_linear": "CLIENT-P2-C1"},
    {"criterion_id": "CLIENT-P2-C1", "dimension_code": "CLIENT", "pillar_code": "P2", "criterion_text": "Activation de canaux ou leviers digitaux pour entretenir la relation client", "options": [{"score": 0, "text": "Aucun levier activ√©"}, {"score": 1, "text": "Utilisation tr√®s ponctuelle"}, {"score": 2, "text": "Canaux activ√©s sur certaines typologies clients"}, {"score": 3, "text": "Canaux digitaux int√©gr√©s dans les pratiques commerciales"}], "next_linear": "CLIENT-P2-C2"},
    {"criterion_id": "CLIENT-P2-C2", "dimension_code": "CLIENT", "pillar_code": "P2", "criterion_text": "R√©gularit√© et structuration des √©changes num√©riques (mails, messages, posts, etc.)", "options": [{"score": 0, "text": "√âchanges non suivis ou d√©sorganis√©s"}, {"score": 1, "text": "R√©ponses ponctuelles et r√©actives"}, {"score": 2, "text": "√âchanges suivis mais non planifi√©s"}, {"score": 3, "text": "√âchanges r√©guliers et pilot√©s"}], "next_linear": "CLIENT-P2-C3"},
    {"criterion_id": "CLIENT-P2-C3", "dimension_code": "CLIENT", "pillar_code": "P2", "criterion_text": "√âcoute et compr√©hension des besoins clients via le digital", "options": [{"score": 0, "text": "Aucun retour client collect√©"}, {"score": 1, "text": "Retours anecdotiques ou non exploit√©s"}, {"score": 2, "text": "Collecte informelle et partielle"}, {"score": 3, "text": "Retours clients r√©guli√®rement recueillis et analys√©s"}], "next_linear": "CLIENT-P3-C1"},
    {"criterion_id": "CLIENT-P3-C1", "dimension_code": "CLIENT", "pillar_code": "P3", "criterion_text": "Activation de plusieurs leviers digitaux pour diff√©rents objectifs clients", "options": [{"score": 0, "text": "Un seul canal utilis√©"}, {"score": 1, "text": "Diversification en cours"}, {"score": 2, "text": "Plusieurs leviers activ√©s selon l'√©tape du parcours"}, {"score": 3, "text": "Orchestration coh√©rente des canaux digitaux"}], "next_linear": "CLIENT-P3-C2"},
    {"criterion_id": "CLIENT-P3-C2", "dimension_code": "CLIENT", "pillar_code": "P3", "criterion_text": "Tra√ßabilit√© des √©changes et transactions clients", "options": [{"score": 0, "text": "Aucune trace des √©changes"}, {"score": 1, "text": "Historique gard√© ponctuellement"}, {"score": 2, "text": "Donn√©es enregistr√©es mais non centralis√©es"}, {"score": 3, "text": "Donn√©es centralis√©es et consultables facilement"}], "next_linear": "CLIENT-P3-C3"},
    {"criterion_id": "CLIENT-P3-C3", "dimension_code": "CLIENT", "pillar_code": "P3", "criterion_text": "Segmentation de profils clients et structuration de l'approche CRM", "options": [{"score": 0, "text": "Aucun tri ou cat√©gorisation"}, {"score": 1, "text": "Distinction basique de profils (ex. : anciens vs nouveaux)"}, {"score": 2, "text": "Segmentation partielle utilis√©e"}, {"score": 3, "text": "Segmentation active utilis√©e dans les actions client"}], "next_linear": "CLIENT-P4-C1"},
    {"criterion_id": "CLIENT-P4-C1", "dimension_code": "CLIENT", "pillar_code": "P4", "criterion_text": "Parcours client digital fluide et int√©gr√© (de l'acquisition √† la fid√©lisation)", "options": [{"score": 0, "text": "Exp√©rience client fragment√©e"}, {"score": 1, "text": "Parcours partiellement digitalis√©"}, {"score": 2, "text": "Parcours coh√©rent sur certains segments"}, {"score": 3, "text": "Parcours fluide con√ßu autour du digital"}], "next_linear": "CLIENT-P4-C2"},
    {"criterion_id": "CLIENT-P4-C2", "dimension_code": "CLIENT", "pillar_code": "P4", "criterion_text": "Personnalisation des contenus, services ou offres selon le profil client", "options": [{"score": 0, "text": "Aucune diff√©renciation"}, {"score": 1, "text": "Personnalisation ponctuelle ou manuelle"}, {"score": 2, "text": "Personnalisation sur certains leviers (newsletter, promo‚Ä¶)"}, {"score": 3, "text": "Personnalisation syst√©matique et automatis√©e"}], "next_linear": "CLIENT-P4-C3"},
    {"criterion_id": "CLIENT-P4-C3", "dimension_code": "CLIENT", "pillar_code": "P4", "criterion_text": "Proactivit√© et innovation dans l'exp√©rience client digitale", "options": [{"score": 0, "text": "Attente passive des demandes"}, {"score": 1, "text": "R√©activit√© sans anticipation"}, {"score": 2, "text": "Actions ponctuelles d'anticipation"}, {"score": 3, "text": "Proactivit√© continue avec offres ou services innovants"}], "next_linear": "PROCESS-P1-C1"},
    
    # Dimension 4 - Process (12 criteria)
    {"criterion_id": "PROCESS-P1-C1", "dimension_code": "PROCESS", "pillar_code": "P1", "criterion_text": "Identification d'un processus interne √† am√©liorer (flux, t√¢ches, √©tapes r√©p√©titives)", "options": [{"score": 0, "text": "Aucun processus rep√©r√©"}, {"score": 1, "text": "Id√©e √©voqu√©e sans suite"}, {"score": 2, "text": "Processus identifi√© mais non trait√©"}, {"score": 3, "text": "Processus d√©fini comme cible de digitalisation"}], "next_linear": "PROCESS-P1-C2"},
    {"criterion_id": "PROCESS-P1-C2", "dimension_code": "PROCESS", "pillar_code": "P1", "criterion_text": "R√©alisation de certaines t√¢ches avec des outils num√©riques (ex. tableurs, scans, apps simples)", "options": [{"score": 0, "text": "T√¢ches 100 % manuelles"}, {"score": 1, "text": "Num√©risation ponctuelle ou personnelle"}, {"score": 2, "text": "Quelques usages r√©guliers dans certaines √©quipes"}, {"score": 3, "text": "Usages num√©riques pr√©sents dans le flux op√©rationnel"}], "next_linear": "PROCESS-P1-C3"},
    {"criterion_id": "PROCESS-P1-C3", "dimension_code": "PROCESS", "pillar_code": "P1", "criterion_text": "Suivi manuel ou num√©rique des t√¢ches ou √©tapes d'un processus", "options": [{"score": 0, "text": "Aucun suivi"}, {"score": 1, "text": "Suivi informel ou individuel"}, {"score": 2, "text": "Suivi partiel par des outils de base"}, {"score": 3, "text": "Suivi organis√© et partag√© des t√¢ches/processus"}], "next_linear": "PROCESS-P2-C1"},
    {"criterion_id": "PROCESS-P2-C1", "dimension_code": "PROCESS", "pillar_code": "P2", "criterion_text": "Digitalisation d'un processus complet (ex. : commande, stock, facturation, RH‚Ä¶)", "options": [{"score": 0, "text": "Processus toujours 100 % papier"}, {"score": 1, "text": "Digitalisation partielle ou interrompue"}, {"score": 2, "text": "Processus digitalis√© mais non optimis√©"}, {"score": 3, "text": "Processus digitalis√© de bout en bout"}], "next_linear": "PROCESS-P2-C2"},
    {"criterion_id": "PROCESS-P2-C2", "dimension_code": "PROCESS", "pillar_code": "P2", "criterion_text": "Adaptation des m√©thodes de travail autour de ces outils digitaux", "options": [{"score": 0, "text": "Outils utilis√©s sans changement d'habitude"}, {"score": 1, "text": "Usages num√©riques impos√©s sans appropriation"}, {"score": 2, "text": "Outils int√©gr√©s par certaines √©quipes"}, {"score": 3, "text": "M√©thodes repens√©es avec les outils"}], "next_linear": "PROCESS-P2-C3"},
    {"criterion_id": "PROCESS-P2-C3", "dimension_code": "PROCESS", "pillar_code": "P2", "criterion_text": "Capacit√© √† tirer des retours sur l'efficacit√© du processus digitalis√©", "options": [{"score": 0, "text": "Aucun retour mesur√©"}, {"score": 1, "text": "Ressenti g√©n√©ral non structur√©"}, {"score": 2, "text": "Feedback ponctuel analys√©"}, {"score": 3, "text": "Retours r√©guliers utilis√©s pour ajustement"}], "next_linear": "PROCESS-P3-C1"},
    {"criterion_id": "PROCESS-P3-C1", "dimension_code": "PROCESS", "pillar_code": "P3", "criterion_text": "Int√©gration claire des outils digitaux dans les flux de travail quotidiens", "options": [{"score": 0, "text": "Outils encore p√©riph√©riques"}, {"score": 1, "text": "Pr√©sents mais non utilis√©s de fa√ßon syst√©matique"}, {"score": 2, "text": "Utilis√©s dans plusieurs services"}, {"score": 3, "text": "Compl√®tement int√©gr√©s dans l'organisation quotidienne"}], "next_linear": "PROCESS-P3-C2"},
    {"criterion_id": "PROCESS-P3-C2", "dimension_code": "PROCESS", "pillar_code": "P3", "criterion_text": "Automatisation partielle de certaines √©tapes (formulaires, rappels, alertes‚Ä¶)", "options": [{"score": 0, "text": "Aucun automatisme"}, {"score": 1, "text": "Automatisation isol√©e ou manuelle"}, {"score": 2, "text": "Automatisme en place sur certaines t√¢ches"}, {"score": 3, "text": "Automatisme stabilis√© et utilis√© efficacement"}], "next_linear": "PROCESS-P3-C3"},
    {"criterion_id": "PROCESS-P3-C3", "dimension_code": "PROCESS", "pillar_code": "P3", "criterion_text": "Structuration rigoureuse des √©tapes de travail via des outils (workflow, pipeline, Kanban‚Ä¶)", "options": [{"score": 0, "text": "Flux non formalis√©s"}, {"score": 1, "text": "Sch√©mas ou outils en r√©flexion"}, {"score": 2, "text": "Workflow partiellement utilis√©"}, {"score": 3, "text": "Workflow d√©fini, partag√© et pilot√©"}], "next_linear": "PROCESS-P4-C1"},
    {"criterion_id": "PROCESS-P4-C1", "dimension_code": "PROCESS", "pillar_code": "P4", "criterion_text": "Fluidit√© et automatisation avanc√©e des workflows internes", "options": [{"score": 0, "text": "T√¢ches toujours manuelles malgr√© les outils"}, {"score": 1, "text": "Automatisation limit√©e ou ponctuelle"}, {"score": 2, "text": "Cha√Ænes semi-automatis√©es"}, {"score": 3, "text": "Automatisations interconnect√©es et fluides"}], "next_linear": "PROCESS-P4-C2"},
    {"criterion_id": "PROCESS-P4-C2", "dimension_code": "PROCESS", "pillar_code": "P4", "criterion_text": "Agilit√© et capacit√© √† faire √©voluer les processus internes en continu", "options": [{"score": 0, "text": "Processus fig√©s"}, {"score": 1, "text": "Ajustements improvis√©s"}, {"score": 2, "text": "R√©vision des process suite √† probl√®mes"}, {"score": 3, "text": "Am√©lioration continue des processus pilot√©e par l'√©quipe"}], "next_linear": "PROCESS-P4-C3"},
    {"criterion_id": "PROCESS-P4-C3", "dimension_code": "PROCESS", "pillar_code": "P4", "criterion_text": "Pilotage des indicateurs de performance op√©rationnelle", "options": [{"score": 0, "text": "Aucun indicateur suivi"}, {"score": 1, "text": "Indicateurs ponctuellement observ√©s"}, {"score": 2, "text": "Suivi de quelques KPIs cl√©s"}, {"score": 3, "text": "Indicateurs op√©rationnels suivis, analys√©s et exploit√©s"}], "next_linear": "TECH-P1-C1"},
    
    # Dimension 5 - Technologies (12 criteria)
    {"criterion_id": "TECH-P1-C1", "dimension_code": "TECH", "pillar_code": "P1", "criterion_text": "Acc√®s √† une connexion Internet fonctionnelle pour l'activit√©", "options": [{"score": 0, "text": "Aucune connexion"}, {"score": 1, "text": "Connexion individuelle mais instable ou personnelle"}, {"score": 2, "text": "Connexion fiable mais limit√©e √† quelques postes"}, {"score": 3, "text": "Connexion stable et accessible √† tous"}], "next_linear": "TECH-P1-C2"},
    {"criterion_id": "TECH-P1-C2", "dimension_code": "TECH", "pillar_code": "P1", "criterion_text": "√âquipements num√©riques disponibles (smartphone, PC, tablette, imprimante...)", "options": [{"score": 0, "text": "Aucun √©quipement num√©rique"}, {"score": 1, "text": "√âquipements personnels utilis√©s √† titre pro"}, {"score": 2, "text": "Quelques √©quipements disponibles pour certains usages"}, {"score": 3, "text": "√âquipements adapt√©s disponibles et fonctionnels"}], "next_linear": "TECH-P1-C3"},
    {"criterion_id": "TECH-P1-C3", "dimension_code": "TECH", "pillar_code": "P1", "criterion_text": "Utilisation d'outils digitaux simples (mail, WhatsApp, Google, scan, bureautique)", "options": [{"score": 0, "text": "Aucun usage"}, {"score": 1, "text": "Usages individuels non li√©s aux t√¢ches m√©tier"}, {"score": 2, "text": "Usages ponctuels dans certaines t√¢ches"}, {"score": 3, "text": "Usages r√©guliers et int√©gr√©s au quotidien"}], "next_linear": "TECH-P2-C1"},
    {"criterion_id": "TECH-P2-C1", "dimension_code": "TECH", "pillar_code": "P2", "criterion_text": "Connectivit√© adapt√©e aux besoins collectifs (wifi partag√©, r√©seau interne, cloud)", "options": [{"score": 0, "text": "Aucun partage"}, {"score": 1, "text": "Partage ponctuel ou non s√©curis√©"}, {"score": 2, "text": "Connexion partag√©e dans certains espaces"}, {"score": 3, "text": "R√©seau adapt√© √† l'activit√© de l'√©quipe"}], "next_linear": "TECH-P2-C2"},
    {"criterion_id": "TECH-P2-C2", "dimension_code": "TECH", "pillar_code": "P2", "criterion_text": "Outils num√©riques sp√©cifiques √† l'activit√© m√©tier (ex. caisse, gestion, CRM...)", "options": [{"score": 0, "text": "Aucun outil d√©di√©"}, {"score": 1, "text": "Outil en test ou limit√© √† une personne"}, {"score": 2, "text": "Outil utilis√© r√©guli√®rement par une √©quipe"}, {"score": 3, "text": "Outil m√©tier structurant int√©gr√© aux op√©rations"}], "next_linear": "TECH-P2-C3"},
    {"criterion_id": "TECH-P2-C3", "dimension_code": "TECH", "pillar_code": "P2", "criterion_text": "Suivi ou maintenance de base des outils et √©quipements (mises √† jour, d√©pannage)", "options": [{"score": 0, "text": "Aucun entretien ou suivi"}, {"score": 1, "text": "Interventions au cas par cas"}, {"score": 2, "text": "Suivi occasionnel en cas de panne"}, {"score": 3, "text": "Maintenance r√©guli√®re ou prestataire identifi√©"}], "next_linear": "TECH-P3-C1"},
    {"criterion_id": "TECH-P3-C1", "dimension_code": "TECH", "pillar_code": "P3", "criterion_text": "Int√©gration r√©guli√®re de nouveaux outils digitaux adapt√©s √† l'activit√©", "options": [{"score": 0, "text": "Aucun nouvel outil int√©gr√© depuis 12 mois"}, {"score": 1, "text": "Outils test√©s mais peu exploit√©s"}, {"score": 2, "text": "Outils int√©gr√©s dans certaines activit√©s"}, {"score": 3, "text": "Int√©gration continue d'outils pertinents"}], "next_linear": "TECH-P3-C2"},
    {"criterion_id": "TECH-P3-C2", "dimension_code": "TECH", "pillar_code": "P3", "criterion_text": "Infrastructure technique stable et adapt√©e (r√©seau, stockage, cloud, applications)", "options": [{"score": 0, "text": "Infrastructure absente ou instable"}, {"score": 1, "text": "Infrastructure minimale ou inadapt√©e"}, {"score": 2, "text": "Infrastructure partielle mais en place"}, {"score": 3, "text": "Infrastructure stable, fiable et utilis√©e efficacement"}], "next_linear": "TECH-P3-C3"},
    {"criterion_id": "TECH-P3-C3", "dimension_code": "TECH", "pillar_code": "P3", "criterion_text": "Capacit√© √† faire √©voluer les outils ou les √©quipements techniques", "options": [{"score": 0, "text": "Aucun renouvellement envisag√©"}, {"score": 1, "text": "√âvolution r√©active en cas de panne"}, {"score": 2, "text": "Am√©lioration planifi√©e partiellement"}, {"score": 3, "text": "Am√©lioration anticip√©e et continue du socle technologique"}], "next_linear": "TECH-P4-C1"},
    {"criterion_id": "TECH-P4-C1", "dimension_code": "TECH", "pillar_code": "P4", "criterion_text": "Outils interconnect√©s entre eux (ex. facturation ‚Üí compta, formulaire ‚Üí base clients‚Ä¶)", "options": [{"score": 0, "text": "Outils utilis√©s s√©par√©ment"}, {"score": 1, "text": "Connexions manuelles ou import/export"}, {"score": 2, "text": "Connexions partielles entre outils"}, {"score": 3, "text": "√âcosyst√®me fluide et automatis√© entre outils"}], "next_linear": "TECH-P4-C2"},
    {"criterion_id": "TECH-P4-C2", "dimension_code": "TECH", "pillar_code": "P4", "criterion_text": "Usage avanc√© des outils pour automatiser ou gagner en efficacit√©", "options": [{"score": 0, "text": "Usages de base uniquement"}, {"score": 1, "text": "Fonctions avanc√©es non exploit√©es"}, {"score": 2, "text": "Automatisations ponctuelles mises en place"}, {"score": 3, "text": "Fonctionnalit√©s avanc√©es utilis√©es de fa√ßon strat√©gique"}], "next_linear": "TECH-P4-C3"},
    {"criterion_id": "TECH-P4-C3", "dimension_code": "TECH", "pillar_code": "P4", "criterion_text": "Capacit√© √† tester et int√©grer de nouvelles solutions ou innovations techniques", "options": [{"score": 0, "text": "Refus ou peur de la nouveaut√©"}, {"score": 1, "text": "Curiosit√© mais sans passage √† l'action"}, {"score": 2, "text": "Tests occasionnels de nouveaux outils"}, {"score": 3, "text": "Tests r√©guliers et int√©gration pilot√©e d'innovations"}], "next_linear": "SECURITE-P1-C1"},
    
    # Dimension 6 - S√©curit√© (12 criteria)
    {"criterion_id": "SECURITE-P1-C1", "dimension_code": "SECURITE", "pillar_code": "P1", "criterion_text": "Conscience des risques num√©riques et cybers√©curit√© (vols, virus, fuites, piratage‚Ä¶)", "options": [{"score": 0, "text": "Aucune conscience"}, {"score": 1, "text": "Risques per√ßus mais non nomm√©s"}, {"score": 2, "text": "Risques identifi√©s de mani√®re basique"}, {"score": 3, "text": "Risques clairement reconnus par l'√©quipe"}], "next_linear": "SECURITE-P1-C2"},
    {"criterion_id": "SECURITE-P1-C2", "dimension_code": "SECURITE", "pillar_code": "P1", "criterion_text": "Mise en place de premi√®res pr√©cautions simples (ex. mot de passe, verrouillage, email pro)", "options": [{"score": 0, "text": "Aucune pr√©caution adopt√©e"}, {"score": 1, "text": "Habitudes personnelles non s√©curis√©es"}, {"score": 2, "text": "Quelques pratiques mises en place sans cadre"}, {"score": 3, "text": "R√©flexes individuels actifs et partag√©s"}], "next_linear": "SECURITE-P1-C3"},
    {"criterion_id": "SECURITE-P1-C3", "dimension_code": "SECURITE", "pillar_code": "P1", "criterion_text": "Sensibilit√© √† la protection des donn√©es personnelles (clients, salari√©s, partenaires‚Ä¶)", "options": [{"score": 0, "text": "Sujet inconnu ou ignor√©"}, {"score": 1, "text": "Sensibilisation tr√®s partielle"}, {"score": 2, "text": "Attention port√©e √† certains types de donn√©es"}, {"score": 3, "text": "Volont√© claire de respecter et prot√©ger les donn√©es"}], "next_linear": "SECURITE-P2-C1"},
    {"criterion_id": "SECURITE-P2-C1", "dimension_code": "SECURITE", "pillar_code": "P2", "criterion_text": "Mise en place de mesures de base (antivirus, sauvegarde, mises √† jour)", "options": [{"score": 0, "text": "Aucune mesure active"}, {"score": 1, "text": "Mesures ponctuelles ou non contr√¥l√©es"}, {"score": 2, "text": "Mesures en place sur certains √©quipements"}, {"score": 3, "text": "Mesures syst√©matiques sur l'ensemble des outils"}], "next_linear": "SECURITE-P2-C2"},
    {"criterion_id": "SECURITE-P2-C2", "dimension_code": "SECURITE", "pillar_code": "P2", "criterion_text": "Organisation d'un minimum de plan de s√©curit√© (r√®gles simples, bonnes pratiques, personnes cl√©s)", "options": [{"score": 0, "text": "Aucun cadre d√©fini"}, {"score": 1, "text": "Quelques conseils diffus√©s oralement"}, {"score": 2, "text": "Recommandations internes ou affich√©es"}, {"score": 3, "text": "R√®gles √©tablies et connues par tous"}], "next_linear": "SECURITE-P2-C3"},
    {"criterion_id": "SECURITE-P2-C3", "dimension_code": "SECURITE", "pillar_code": "P2", "criterion_text": "Capacit√© √† r√©agir √† un incident (perte, piratage, attaque‚Ä¶)", "options": [{"score": 0, "text": "Aucune r√©action envisag√©e"}, {"score": 1, "text": "R√©action improvis√©e ou instinctive"}, {"score": 2, "text": "R√©action organis√©e sur certains cas"}, {"score": 3, "text": "Proc√©dures simples connues et r√©actives en cas de probl√®me"}], "next_linear": "SECURITE-P3-C1"},
    {"criterion_id": "SECURITE-P3-C1", "dimension_code": "SECURITE", "pillar_code": "P3", "criterion_text": "Mise en place de pratiques internes de cybers√©curit√© (r√®gles, chartes, formations‚Ä¶)", "options": [{"score": 0, "text": "Aucune pratique formalis√©e"}, {"score": 1, "text": "Habitudes individuelles non cadr√©es"}, {"score": 2, "text": "R√®gles connues mais peu appliqu√©es"}, {"score": 3, "text": "Ensemble de pratiques partag√©es et respect√©es"}], "next_linear": "SECURITE-P3-C2"},
    {"criterion_id": "SECURITE-P3-C2", "dimension_code": "SECURITE", "pillar_code": "P3", "criterion_text": "Gestion des acc√®s (droits d'utilisation, comptes, niveaux de confidentialit√©)", "options": [{"score": 0, "text": "Acc√®s ouverts ou partag√©s sans contr√¥le"}, {"score": 1, "text": "Quelques restrictions de bon sens"}, {"score": 2, "text": "Droits d√©finis sur certains outils"}, {"score": 3, "text": "Droits structur√©s et g√©r√©s par r√¥le ou poste"}], "next_linear": "SECURITE-P3-C3"},
    {"criterion_id": "SECURITE-P3-C3", "dimension_code": "SECURITE", "pillar_code": "P3", "criterion_text": "Suivi des mises √† jour de s√©curit√© et entretien r√©gulier des outils", "options": [{"score": 0, "text": "Aucun suivi"}, {"score": 1, "text": "Mises √† jour al√©atoires ou manuelles"}, {"score": 2, "text": "Suivi partiel et r√©actif"}, {"score": 3, "text": "Mises √† jour r√©guli√®res automatis√©es ou planifi√©es"}], "next_linear": "SECURITE-P4-C1"},
    {"criterion_id": "SECURITE-P4-C1", "dimension_code": "SECURITE", "pillar_code": "P4", "criterion_text": "Int√©gration d'une culture de s√©curit√© continue (habitudes, √©changes, responsabilit√© collective)", "options": [{"score": 0, "text": "Sujet ignor√© dans l'organisation"}, {"score": 1, "text": "Conscience partielle"}, {"score": 2, "text": "Culture pr√©sente dans certains services"}, {"score": 3, "text": "Sensibilisation int√©gr√©e √† l'ensemble de l'entreprise"}], "next_linear": "SECURITE-P4-C2"},
    {"criterion_id": "SECURITE-P4-C2", "dimension_code": "SECURITE", "pillar_code": "P4", "criterion_text": "Mise en conformit√© avec les bonnes pratiques (ex. RGPD, obligations clients, audits internes)", "options": [{"score": 0, "text": "Aucune conformit√© vis√©e"}, {"score": 1, "text": "Intention ou documentation incompl√®te"}, {"score": 2, "text": "Mise en conformit√© partielle ou en cours"}, {"score": 3, "text": "Conformit√© document√©e et suivie"}], "next_linear": "SECURITE-P4-C3"},
    {"criterion_id": "SECURITE-P4-C3", "dimension_code": "SECURITE", "pillar_code": "P4", "criterion_text": "Capacit√© √† anticiper les nouvelles menaces et int√©grer des solutions innovantes (cyberscan, MFA, etc.)", "options": [{"score": 0, "text": "Aucune veille"}, {"score": 1, "text": "R√©actions uniquement en cas de crise"}, {"score": 2, "text": "Veille ou innovation ponctuelle"}, {"score": 3, "text": "Anticipation active et recherche continue de solutions"}], "next_linear": None},
]

async def seed_database():
    """Seed MongoDB with diagnostic criteria"""
    client = AsyncIOMotorClient(MONGODB_URL)
    db = client[DB_NAME]
    
    print("üå± Starting database seeding...")
    
    # Clear existing data
    print("üóëÔ∏è  Clearing existing data...")
    await db.dimensions.delete_many({})
    await db.pillars.delete_many({})
    await db.criteria.delete_many({})
    
    # Insert dimensions
    print("üìä Inserting dimensions...")
    await db.dimensions.insert_many(DIMENSIONS)
    print(f"   ‚úì Inserted {len(DIMENSIONS)} dimensions")
    
    # Insert pillars
    print("üèõÔ∏è  Inserting pillars...")
    await db.pillars.insert_many(PILLARS)
    print(f"   ‚úì Inserted {len(PILLARS)} pillars")
    
    # Insert criteria
    print("üìã Inserting criteria...")
    await db.criteria.insert_many(CRITERIA)
    print(f"   ‚úì Inserted {len(CRITERIA)} criteria")
    
    print("\n‚úÖ Database seeding completed!")
    print(f"   üìä {len(DIMENSIONS)} dimensions")
    print(f"   üèõÔ∏è  {len(PILLARS)} pillars")
    print(f"   üìã {len(CRITERIA)} criteria")
    print("\n‚ú® All 72 criteria have been loaded successfully!")
    
    client.close()

if __name__ == "__main__":
    asyncio.run(seed_database())
